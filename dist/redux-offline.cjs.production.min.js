"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@redux-offline/offline-side-effects");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n={outbox:[],busy:!1,online:!0};function r(e,r){if(void 0===e&&(e=n),"Offline/OFFLINE_SERIALIZE"===r.type){var u=r.payload,o=u.status,i=u.retryScheduled,a="paused"!==o,f="busy"===o;return t({},e,function(e,t){if(null==e)return{};var n,r,u={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(u[n]=e[n]);return u}(u,["status","retryScheduled"]),{retryScheduled:Boolean(i),online:a,busy:f})}return e}exports.createOffline=function(n,u){void 0===u&&(u=function(){return{}});var o=null;return{enhanceStore:function(r){return function(i,a,f){var l=r(i,a,f),d=null,c=t({onCommit:function(e,n){return l.dispatch(t({},n,{payload:e}))},onRollback:function(e,n){return l.dispatch(t({},n,{payload:e}))},onStatusChange:function(e){"paused"===e?l.dispatch({type:"Offline/OFFLINE_STATUS_CHANGED",payload:!1}):("paused"===d&&l.dispatch({type:"Offline/OFFLINE_STATUS_CHANGED",payload:!0}),l.dispatch({type:"Offline/OFFLINE_BUSY",payload:"busy"===e})),d=e},onSerialize:function(e){l.dispatch({type:"Offline/OFFLINE_SERIALIZE",payload:e})},onRetry:function(e){return l.dispatch({type:"Offline/OFFLINE_SCHEDULE_RETRY",payload:{delay:e}})}},u(l));return o=e.offlineSideEffects(c,n),n.detectNetwork&&n.detectNetwork((function(e){return o.setPaused(!e)})),l}},reducer:r,middleware:function(e){return function(){return function(t){return function(n){var r,u;t(n),"persist/REHYDRATE"===n.type&&e.rehydrateState(null!=(r=null==(u=n.payload)?void 0:u.offline)?r:{}),"Offline/OFFLINE_RESET_STATE"===n.type&&e.reset(),e.addSideEffect(n)}}}}(o)}};
//# sourceMappingURL=redux-offline.cjs.production.min.js.map
